<table class="table table-bordered">
  <colgroup>
    <col class="span2">
    <col class="span3">
    <col class="span3">
    <col class="span3">
    <col class="span3">
    <col class="span3">
  </colgroup>
  <% if feedbacks.length == 0 %>
      <caption>
        <h2> Not given any feedback this week(<%=user.name %>)</h2>
        <%= link_to image_tag('/assets/previous.png', :height => '20', :width => '20'), nil, :date => (begin_date.to_date - 1.day), :user_id => user.id, :remote => true, :id => "previous-given" %>
        <%= begin_date.nil? ? "" : "( #{begin_date} to #{end_date})" %>
        <%= link_to image_tag('/assets/next.png', :height => '20', :width => '20'), nil, :date => (end_date.to_date + 1.day), :user_id => user.id, :remote => true, :id => "next-given" %>
      </caption>
  <% else %>
      <caption>
        <h2>Given Feedback List <%= user.name %> </h2>
        <%= link_to image_tag('/assets/previous.png', :height => '20', :width => '20'), nil, :date => (begin_date.to_date - 1.day), :user_id => user.id, :remote => true, :id => "previous-given" %>
        <%= begin_date.nil? ? "" : "( #{begin_date} to #{end_date})" %>
        <%= link_to image_tag('/assets/next.png', :height => '20', :width => '20'), nil, :date => (end_date.to_date + 1.day), :user_id => user.id, :remote => true, :id => "next-given" %>
      </caption>
      <thead>
      <tr style = "background-color: #A2AFCC;">
        <th>Name</th>
        <th>Monday</th>
        <th>Tuesday</th>
        <th>Wednesday</th>
        <th>Thursday</th>
        <th>Friday</th>
      </tr>
      </thead>
      <% user = feedbacks.to_a.uniq{|u| u.to_id} %>
      <% user.each do |u| %>
          <tr>
            <td><%= user_name(users,u.to_id) %></td>
            <% given_feedbacks =  feedbacks.to_a.select{|f|f.to_id == u.to_id}%>
            <% if given_feedbacks.count == 5%>
                <% given_feedbacks.each do |feedback|%>
                    <% if feedback.created_at.wday == 1 %>
                        <td><%= feedback.feedback%></td>
                    <% elsif feedback.created_at.wday == 2 %>
                        <td><%= feedback.feedback %></td>
                    <% elsif feedback.created_at.wday == 3 %>
                        <td><%= feedback.feedback %></td>
                    <% elsif feedback.created_at.wday == 4 %>
                        <td><%= feedback.feedback %></td>
                    <% elsif feedback.created_at.wday == 5 %>
                        <td><%= feedback.feedback %></td>
                    <% else %>
                        <td>hi</td>
                    <% end %>
                <% end %>
            <% else %>
                <% for i in 2..given_feedbacks.first.created_at.wday %>
                  <td></td>
                <% end %>
                <% given_feedbacks.each do |feedback|%>
                    <% if feedback.created_at.wday == 1 %>
                        <td><%= feedback.feedback%></td>
                    <% elsif feedback.created_at.wday == 2 %>
                        <td><%= feedback.feedback  %></td>
                    <% elsif feedback.created_at.wday == 3 %>
                        <td><%= feedback.feedback %></td>
                    <% elsif feedback.created_at.wday == 4 %>
                        <td><%= feedback.feedback %></td>
                    <% elsif feedback.created_at.wday == 5 %>
                        <td><%= feedback.feedback %></td>
                    <% else %>
                        <td>hi</td>
                    <% end %>
                <% end %>
            <% end %>
          </tr>
      <% end %>

  <% end %>
</table>
<%= link_to "Back", admin_users_path, :class => "btn" %>
<%#= page_navigation_links feedbacks %>